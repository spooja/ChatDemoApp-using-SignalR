<!DOCTYPE html>
<html>

<head>
    <title>SignalR Chat</title>
    <style type="text/css">
        .container {
            background-color: aliceblue;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <input type="text" id="message" />
        <input type="button" id="sendmessage" value="send" />
        <input type="hidden" id="displayname" />
        <ul id="discuss"></ul>
    </div>

    <!--script reference-->

    <script src="Scripts/bower_components/jquery/dist/jquery.min.js"></script>

    <script src="Scripts/bower_components/signalr/jquery.signalR.min.js"></script>
    <!--autogenerated signalr script-->
    <script src="signalr/hubs"></script>
    <script type="text/javascript">
        $(function () {
            //declare proxy to reference hub
            var chat = $.connection.chatHub;
            //create function that hub can call to braodcast message
            chat.client.broadcastMessage = function (name, message) {
                //html encode display name and message.
                var encodeName = $('<div/>').text(name).html();
                var encodeMessage = $('<div/>').text(message).html();

                //add message to the page
                $('#discuss').append('<li><strong>' + encodeName + '</strong>:&nbsp;&nbsp;&nbsp' + encodeMessage + '</li>');

            };

            //get the user name and store it to prepent to message
            $('#displayname').val(prompt('Enter Your name:', ''));
            $('#message').focus();

            //start the connection
            $.connection.hub.start().done(function () {
                $('#sendmessage').click(function () {
                    //call send method on the hub
                    chat.server.send($('#displayname').val(), $('#message').val());
                    $('#message').val('').focus();
                });
            });
        });
    </script>

</body>

</html>